<!DOCTYPE html>
<html lang="hy">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HayShop - ’Ä’°’µ’Ø’°’Ø’°’∂ ‘Ω’°’∂’∏÷Ç’©’∂’•÷Ä’´ ’Ä’°÷Ä’©’°’Ø</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

    <style>
        :root {
            --himnakan: #d97706;
            --mut-kapuyt: #1e293b;
            --bac-moxratuyn: #f1f5f9;
            --spitak: #ffffff;
            --kanach: #22c55e;
            --karmir: #ef4444;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            background-color: var(--bac-moxratuyn);
        }

        header {
            background: var(--mut-kapuyt);
            color: white;
            padding: 15px 5%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0; z-index: 1000;
        }

        .adv-slider {
            width: 100%;
            height: 400px;
            overflow: hidden;
            position: relative;
            background: #000;
        }
        .slides {
            display: flex;
            width: 500%;
            height: 100%;
            animation: slide-animation 25s infinite ease-in-out;
        }
        .slide {
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        .slide::before {
            content: '';
            position: absolute;
            top:0; left:0; width:100%; height:100%;
            background: rgba(0,0,0,0.5);
        }
        .slide-content {
            position: relative;
            color: white;
            text-align: center;
            padding: 20px;
            max-width: 800px;
        }
        .slide-content h2 { font-size: 2.2rem; margin-bottom: 10px; color: var(--himnakan); }

        @keyframes slide-animation {
            0%, 15% { transform: translateX(0); }
            20%, 35% { transform: translateX(-20%); }
            40%, 55% { transform: translateX(-40%); }
            60%, 75% { transform: translateX(-60%); }
            80%, 95% { transform: translateX(-80%); }
            100% { transform: translateX(0); }
        }

        .nav-btns { display: flex; gap: 10px; }
        
        button {
            padding: 10px 18px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            font-weight: bold;
            transition: 0.3s;
        }

        .btn-glxavor { background: var(--himnakan); color: white; }
        .btn-shurj { background: transparent; color: white; border: 1px solid white; }

        .voronum-area {
            background: white;
            padding: 20px 5%;
            display: flex;
            gap: 10px;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            border-bottom: 1px solid #ddd;
        }

        input, select {
            padding: 10px;
            border: 1px solid #cbd5e1;
            border-radius: 6px;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            padding: 30px 5%;
            flex: 1;
        }

        .qart {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            position: relative;
        }

        .qart img { width: 100%; height: 200px; object-fit: cover; }
        .qart-content { padding: 20px; }

        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(4px);
            z-index: 2000;
        }

        .modal-body {
            background: white;
            margin: 40px auto;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            border-radius: 12px;
            max-height: 85vh;
            overflow-y: auto;
        }

        .footer-content {
            background: var(--mut-kapuyt);
            color: white;
            padding: 40px 5%;
            text-align: center;
        }
    </style>
</head>
<body>

<header>
    <h2 onclick="location.reload()" style="cursor:pointer">HayShop</h2>
    <div class="nav-btns">
        <button class="btn-shurj" onclick="location.reload()">‘≥’¨’≠’°’æ’∏÷Ä</button>
        <button class="btn-glxavor" onclick="bacelModal('avelacmanModal')">+ ‘±’æ’•’¨’°÷Å’∂’•’¨ ‘≤’´’¶’∂’•’Ω</button>
        <button style="background:#475569; color:white;" onclick="bacelModal('adminModal')">‘±’§’¥’´’∂</button>
    </div>
</header>

<div class="adv-slider">
    <div class="slides">
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1581094794329-c8112a89af12?auto=format&fit=crop&w=1200&q=80');">
            <div class="slide-content"><h2>‘º’°’æ’°’£’∏÷Ç’µ’∂ ’é’°÷Ä’∫’•’ø’∂’•÷Ä’®</h2></div>
        </div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1560066984-138dadb4c035?auto=format&fit=crop&w=1200&q=80');">
            <div class="slide-content"><h2>‘≥’•’≤’•÷Å’Ø’∏÷Ç’©’µ’°’∂ ’ç÷Ä’°’∞’∂’•÷Ä</h2></div>
        </div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1556910103-1c02745aae4d?auto=format&fit=crop&w=1200&q=80');">
            <div class="slide-content"><h2>’Ä’°’¥’•’≤ ‘Ω’∏’∞’°’∂’∏÷Å</h2></div>
        </div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1486006396123-c7af5e13d9a8?auto=format&fit=crop&w=1200&q=80');">
            <div class="slide-content"><h2>‘±’æ’ø’∏’Ω’∫’°’Ω’°÷Ä’Ø’∏÷Ç’¥</h2></div>
        </div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1517245386807-bb43f82c33c4?auto=format&fit=crop&w=1200&q=80');">
            <div class="slide-content">
                <h2 style="color: var(--kanach);">’Å’•÷Ä ’£’∏’æ’°’¶’§’® ’°’µ’Ω’ø’•’≤</h2>
                <p>‘ø’°’∫’ù hayshop333@gmail.com</p>
            </div>
        </div>
    </div>
</div>

<div class="voronum-area">
    <input type="text" id="anvanVoronum" placeholder="’à÷Ä’∏’∂’•’¨ ’°’∂’∏÷Ç’∂’∏’æ...">
    <select id="kaxaqiVoronum">
        <option value="">‘≤’∏’¨’∏÷Ä ÷Ñ’°’≤’°÷Ñ’∂’•÷Ä’®</option>
        <option value="‘µ÷Ä÷á’°’∂">‘µ÷Ä÷á’°’∂</option>
        <option value="‘≥’µ’∏÷Ç’¥÷Ä’´">‘≥’µ’∏÷Ç’¥÷Ä’´</option>
        <option value="’é’°’∂’°’±’∏÷Ä">’é’°’∂’°’±’∏÷Ä</option>
    </select>
    <button class="btn-glxavor" onclick="nkarelGulyavorEjy()">’à÷Ä’∏’∂’•’¨</button>
</div>

<div id="loading" style="text-align:center; padding:20px;">‘≤’•’º’∂’æ’∏÷Ç’¥ ’ß...</div>
<div class="grid" id="himnakanGrid"></div>

<footer class="footer-content">
    <h3 style="color: var(--himnakan);">HayShop</h3>
    <p>¬© 2025 - ’Ä’°’µ’Ø’°’Ø’°’∂ ‘Ω’°’∂’∏÷Ç’©’∂’•÷Ä’´ ’Ä’°÷Ä’©’°’Ø</p>
</footer>

<div id="avelacmanModal" class="modal"><div class="modal-body">
    <h3>‘±’æ’•’¨’°÷Å’∂’•’¨ ‘≤’´’¶’∂’•’Ω</h3>
    <form id="avelacmanForm">
        <input type="text" id="bAnun" placeholder="‘±’∂’æ’°’∂’∏÷Ç’¥" required style="width:100%; margin-bottom:10px;">
        <select id="bKaxaq" required style="width:100%; margin-bottom:10px;">
            <option value="‘µ÷Ä÷á’°’∂">‘µ÷Ä÷á’°’∂</option><option value="‘≥’µ’∏÷Ç’¥÷Ä’´">‘≥’µ’∏÷Ç’¥÷Ä’´</option><option value="’é’°’∂’°’±’∏÷Ä">’é’°’∂’°’±’∏÷Ä</option>
        </select>
        <textarea id="bNkaragir" placeholder="’Ü’Ø’°÷Ä’°’£÷Ä’∏÷Ç’©’µ’∏÷Ç’∂" style="width:100%; margin-bottom:10px;"></textarea>
        <label>’Ü’Ø’°÷Ä:</label><input type="file" id="bLogo" accept="image/*" required style="margin-bottom:10px;">
        <label>’é’´’§’•’∏:</label><input type="file" id="bVideo" accept="video/*" style="margin-bottom:10px;">
        <button type="submit" id="submitBtn" class="btn-glxavor" style="width:100%">’à÷Ç’≤’°÷Ä’Ø’•’¨ ’∞’°’Ω’ø’°’ø’¥’°’∂</button>
        <button type="button" onclick="pakelModal('avelacmanModal')" style="width:100%; background:none; border:none; color:gray; cursor:pointer; margin-top:10px;">’ì’°’Ø’•’¨</button>
    </form>
</div></div>

<div id="adminModal" class="modal"><div class="modal-body" style="max-width:300px">
    <h3>‘±’§’¥’´’∂ ’¥’∏÷Ç’ø÷Ñ</h3>
    <input type="password" id="gaxtnabarInput" placeholder="‘≥’°’≤’ø’∂’°’¢’°’º" style="width:100%; margin-bottom:15px;">
    <button onclick="mutqAdmin()" class="btn-glxavor" style="width:100%">’Ñ’∏÷Ç’ø÷Ñ</button>
</div></div>

<div id="manramasnMall" class="modal"><div class="modal-body" id="manramasnContent"></div></div>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyAXH7T_obCBUuG4zXhY0qpwwBfb3JgMOrI",
        authDomain: "hayshop-b54ab.firebaseapp.com",
        projectId: "hayshop-b54ab",
        storageBucket: "hayshop-b54ab.firebasestorage.app",
        messagingSenderId: "342283633284",
        appId: "1:342283633284:web:7e2def7ad150124636f8d1",
        measurementId: "G-XD8XZ00NJ5",
        databaseURL: "https://hayshop-b54ab-default-rtdb.firebaseio.com/"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    let tvyalner = [];
    let adminStatus = false;

    function bacelModal(id) { document.getElementById(id).style.display = 'block'; }
    function pakelModal(id) { document.getElementById(id).style.display = 'none'; }

    function mutqAdmin() {
        if(document.getElementById('gaxtnabarInput').value === "‘∂’°÷Ñ’°÷Ä") {
            adminStatus = true; pakelModal('adminModal'); nkarelGulyavorEjy();
        } else alert("’ç’≠’°’¨ ’£’°’≤’ø’∂’°’¢’°’º");
    }

    db.ref('xanutner').on('value', (snapshot) => {
        const data = snapshot.val();
        tvyalner = [];
        if (data) Object.keys(data).forEach(key => tvyalner.push({ fbKey: key, ...data[key] }));
        document.getElementById('loading').style.display = 'none';
        nkarelGulyavorEjy();
    });

    document.getElementById('avelacmanForm').onsubmit = async function(e) {
        e.preventDefault();
        const btn = document.getElementById('submitBtn');
        btn.disabled = true; btn.innerText = "‘≤’•’º’∂’æ’∏÷Ç’¥ ’ß...";
        const toBase64 = file => new Promise((res, rej) => {
            const r = new FileReader(); r.readAsDataURL(file);
            r.onload = () => res(r.result); r.onerror = e => rej(e);
        });

        try {
            const logo = await toBase64(document.getElementById('bLogo').files[0]);
            let video = null;
            if(document.getElementById('bVideo').files[0]) video = await toBase64(document.getElementById('bVideo').files[0]);
            await db.ref('xanutner').push({
                anun: document.getElementById('bAnun').value,
                kaxaq: document.getElementById('bKaxaq').value,
                nkaragir: document.getElementById('bNkaragir').value,
                logo, video, hastatvac: false
            });
            alert("’Ä’°’ª’∏’≤’∏÷Ç’©’µ’°’¥’¢ ’∏÷Ç’≤’°÷Ä’Ø’æ’•÷Å:"); pakelModal('avelacmanModal');
        } catch (err) { alert("’ç’≠’°’¨ ’æ’•÷Ä’¢’•’º’∂’¥’°’∂ ’™’°’¥’°’∂’°’Ø:"); }
        finally { btn.disabled = false; btn.innerText = "’à÷Ç’≤’°÷Ä’Ø’•’¨ ’∞’°’Ω’ø’°’ø’¥’°’∂"; }
    };

    function nkarelGulyavorEjy() {
        const grid = document.getElementById('himnakanGrid');
        grid.innerHTML = '';
        const nameF = document.getElementById('anvanVoronum').value.toLowerCase();
        const cityF = document.getElementById('kaxaqiVoronum').value;

        tvyalner.forEach(item => {
            if(!adminStatus && !item.hastatvac) return;
            if(nameF && !item.anun.toLowerCase().includes(nameF)) return;
            if(cityF && item.kaxaq !== cityF) return;

            const d = document.createElement('div');
            d.className = 'qart';
            d.innerHTML = `
                <img src="${item.logo}">
                <div class="qart-content">
                    <h3>${item.anun}</h3>
                    <p>üìç ${item.kaxaq}</p>
                    <button class="btn-glxavor" style="width:100%" onclick="ditelManramasn('${item.fbKey}')">’è’•’Ω’∂’•’¨ ’°’æ’•’¨’´’∂</button>
                    ${adminStatus ? `<button onclick="hastatel('${item.fbKey}')" style="background:green; color:white; margin-top:5px; width:100%">’Ä’°’Ω’ø’°’ø’•’¨</button>
                    <button onclick="heracnel('${item.fbKey}')" style="background:red; color:white; margin-top:5px; width:100%">’ã’∂’ª’•’¨</button>` : ''}
                </div>
            `;
            grid.appendChild(d);
        });
    }

    function ditelManramasn(key) {
        const item = tvyalner.find(x => x.fbKey === key);
        document.getElementById('manramasnContent').innerHTML = `
            <h2>${item.anun}</h2>
            <p>${item.nkaragir}</p>
            <img src="${item.logo}" style="width:100%; border-radius:10px;">
            ${item.video ? `
                <video controls preload="auto" playsinline style="width:100%; min-height:240px; background:#000; border-radius:10px; margin-top:10px;">
                    <source src="${item.video}" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'>
                    <source src="${item.video}" type="video/mp4">
                    ’Å’•÷Ä ’¢÷Ä’°’∏÷Ç’¶’•÷Ä’® ’π’´ ’°’ª’°’Ø÷Å’∏÷Ç’¥ ’°’µ’Ω ’æ’´’§’•’∏’∂:
                </video>` : ''}
            <button onclick="pakelModal('manramasnMall')" class="btn-glxavor" style="width:100%; margin-top:20px">’ì’°’Ø’•’¨</button>
        `;
        bacelModal('manramasnMall');
    }

    function hastatel(key) { db.ref('xanutner/' + key).update({ hastatvac: true }); }
    function heracnel(key) { if(confirm("’ã’∂’ª’•’û’¨")) db.ref('xanutner/' + key).remove(); }
</script>
</body>
</html>
